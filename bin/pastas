#!/usr/bin/env bash

set -e
set -u
set -o pipefail

# Prints the current state of your clipboard to stdout
# @example
#   pastas > everything_i_copied.txt
#
# @example Download every link I copy to my clipboard
#   pastas | wget -i -
#
# @see https://evanhahn.com/scripts-i-wrote-that-i-use-all-the-time/

trap 'exit 0' SIGINT

last_value=''

while true
do
  value="$(pasta)"

  if [ "$last_value" != "$value" ]; then
    echo "$value"
    last_value="$value"
  fi

  sleep 0.1
done
